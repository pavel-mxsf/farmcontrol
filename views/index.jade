extends layout

block content
  script(src='/js/mainPanelController.js')

  div(ng:controller="MainPanelCtrl", ng:init="getCommands()")

    div.navbar.navbar-inverse
      div.navbar-inner
        input(type='number',ng:model='refreshSpeed',min='100',max='15000').navbar-search.pull-right
        button(ng:click="getCommands()").btn reload commands
    table.table.table-striped
      tr(ng:repeat="(key, value) in info.data")
        td(style="height:80px")
          i.icon-info-sign
          //div.label {{key}}
        td
          h2 {{value.fullInfo.hostname}}

        td
          div(ng:repeat="cpu in value.rtInfo.cpusPerc track by $index",style="width:100px;height:{{80/value.rtInfo.cpusPerc.length}}px;margin-bottom:0px").progress
            div.bar(style="width: {{cpu}}px", ng:class="{'bar-success':cpu<70,'bar-warning':cpu>70 && cpu<95,'bar-danger':cpu>95}")

        //td
        //    div(ng:repeat="cpu in value.rtInfo.cpusSpeeds track by $index") {{cpu}}
        td
          div(style="width:100px;height:85px;margin-bottom:0px",ng:show="value.rtInfo").progress
            div.bar(style="width: {{100-value.rtInfo.freemem/value.fullInfo.totalmem*100}}px")
        td
          button(ng:show="value.fullInfo.mac",ng:click="wol(value.fullInfo.mac)",style="width:100px;height:100%").btn.btn-success wake
        td(ng:repeat="cmd in commands",style="width:100px;height:100%")
            button(style="width:100%;height:100%",ng:click="runCommand(key,cmd)",ng:disabled="!value.rtInfo",ng:class="{'disabled':!value.rtInfo,'btn-success':value.rtInfo.processInfo[cmd.process]}").btn {{cmd.name}}

